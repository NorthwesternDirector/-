<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        // function search(arr, key) {
        //     var low = 0;
        //     var high = arr.length - 1;
        //     while (low <= high) {
        //         var mid = parseInt((low + high) / 2);
        //         console.log(mid);
        //         if (key == arr[mid]) {
        //             return mid;
        //         } else if (key > arr[mid]) {
        //             low = mid + 1
        //         } else if (key < arr[mid]) {
        //             high = mid - 1
        //         } else {
        //             return -1
        //         }
        //     }
        // };

        // var arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17];
        // var result = search(arr, 3);
        // console.log(result);
        // // console.log(parseInt(1.6))

        // function findNode(node) {
        //     if (node.tagNme.toLowerCase() == "li") {
        //         return node
        //     } else {
        //         return findNode(node.parentNode)
        //     }
        // }

        // function sum(...arg) {
        //     if ([...arg].length == 1) {
        //         var sum1 = [...arg][0];
        //         var sumFn = function(y) {
        //             sum1 += y;
        //             return sumFn;
        //         };
        //         sumFn.valueOf = function() {
        //             return sum1
        //         };
        //         return sumFn;
        //     } else {
        //         var sum2 = 0;
        //         for (var i = 0; i < [...arg].length; i++) {
        //             sum2 += [...arg][i]
        //         };
        //         return sum2;
        //     };
        // };
        //console.log(sum(2)(3)(4).valueOf())
        //console.log(sum(2, 3, 4).valueOf())

        // function aa() {
        //     aa.valueOf = function() {
        //         return 13;
        //     };
        //     //return 12;
        // };
        // console.log(aa().valueOf())


        // this.a = 20;
        // var test = {
        //     a: 40,
        //     init: () => {
        //         console.log(this)
        //         console.log(this.a);

        //         function go() {
        //             this.a = 60;
        //             console.log(this)
        //             console.log(this.a);
        //         }
        //         go.prototype.a = 50;
        //         return go;
        //     }
        // };
        // window.test.init()
        // var p = test.init();
        // p();

        // function  C1(name) {      
        //     if (name) {          
        //         this.name  =  name;      
        //     }  
        // }    
        // function  C2(name) {      
        //     this.name  =  name;  
        // }    
        // function  C3(name) {      
        //     this.name  =  name  ||  "John";  
        // }    
        // C1.prototype.name  =  "Tom";  
        // C2.prototype.name  =  "Tom";  
        // C3.prototype.name  =  "John";    
        // console.log(new  C1().name  +  ","  +  new  C2().name  +  ","  +  new  C3().name);


        //请写出最快查找数组[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47]中31出现的位置
        // function findPos(arr, item) {
        //     var low = 0;
        //     var high = arr.length - 1;
        //     while (low <= high) {
        //         var mid = parseInt((low + high) / 2)
        //         if (item == arr[mid]) {
        //             return mid;
        //         } else if (item > arr[mid]) {
        //             low = mid + 1;
        //         } else if (item < arr[mid]) {
        //             high = mid - 1;
        //         }
        //     }
        //     return -1
        // };
        // var arr = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47];

        // console.log(findPos(arr, 31))


        /*对象按key排序*/
        // var ordered = {};
        // Object.keys(tmpObj).sort().forEach(function(key) {
        //     ordered[key] = tmpObj[key];
        // });

        // /*对象按value排序*/
        // function objvalueSort(obj) {
        //     var newkey = Object.keys(obj).sort(function(key1, key2) {
        //         return obj[key2] - obj[key1];
        //     })　　
        //     var newObj = {};
        //     for (var i = 0; i < newkey.length; i++) {
        //         newObj[newkey[i]] = obj[newkey[i]];
        //     }
        //     return newObj;
        // };

        /*会立即执行*/
        // for (var i = 0; i < 10; i++) {

        //     setTimeout((() => {
        //         console.log(i);
        //     })(i), 1000)
        // };

        // for (var i = 0; i < 10; i++) {
        //     (function(i) {
        //         setTimeout(() => {
        //             console.log(i);
        //         }, 1000 * i)
        //     })(i)
        // }

        // var aa = [1, 2, [3, 4]];
        // console.log(aa.toString())

        /*数组扁平化*/
        function flat(arr) {
            return arr.reduce(function(flatArr, currElement) {
                return Array.isArray(currElement) ? [...flatArr, ...flat(currElement)] : [...flatArr, currElement]
            }, [])
        };
        console.log(flat([1, 2, 3, [4, [5, 6]], 8, 9]));

        /*数组扁平化*/
        var arr = [
            [1, 2, 2],
            [3, 4, 5, 5],
            [6, 7, 8, 9, [11, 12, [12, 13, [14]]]], 10
        ];

        function flat2(arr) {
            var tmpArr = arr.toString().split(",");
            tmpArr = [...new Set(tmpArr)];
            tmpArr.sort(function(a, b) {
                return a - b
            });
            return tmpArr
        }
        console.log(flat2(arr))
    </script>
</body>

</html>